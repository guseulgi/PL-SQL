한 번에 여러 데이터를 관리하거나 저장하기 위한 자료형
---

# 레코드
자료형이 다른 여러 데이터를 저장하는 타입
```
TYPE 레코드명 Is Record(
  변수명 타입 (Not Null) := (Default) 값,
  변수명 타입 := (Default) 값,
)
```
- 기존 자료형처럼 사용 가능
- 레코드에 포함된 변수는 레코드명과 마침표(.)로 사용

```
Declare
  Typee REC_DEPT Is Record(
    deptno NUMBER(2) NOT NULL := 99,
    dname DEPT.DNAME%TYPE,
  );
  dept_rec REC_DEPT; -- 위에서 정의한 레코드를 변수로 선언
  -- dept_rec2 REC_DEPT2;
Begin
  dept_rec.deptno := 99;
  dept_rec.dname := 'DB';

  DBMS_OUTPUT.PUT_LINE('Dept No: ' || dept_rec.deptno);
  DBMS_OUTPUT.PUT_LINE('Dept Name: ' || dept_rec.dname);
End;
/
```

## Record Insert & Update
```
Create table DEPT_RECORD
As Select * From DEPT;

Declare
  Typee REC_DEPT Is Record(
    deptno NUMBER(2) NOT NULL := 99,
    dname DEPT.DNAME%TYPE,
  );
  dept_rec REC_DEPT;
Begin
  dept_rec.deptno := 99;
  dept_rec.dname := 'DB';

-- Ex Insert
Insert into DEPT_RECORD
Values dept_rec;
--

-- Ex Update
Update DEPT_RECORD
SET ROW = dept_rec -- Set 절에는 Row 키워드와 함께 써줘야함
Where DEPTNO = 99;
--
End;
/
```
- 기존의 Insert 문에선 삽입할 데이터를 Values에 하나씩 명시했으나 레코드를 사용하면 Values 절에 레코드명만 넣어줘도 된다.
- 다만 선언한 레코드와 Insert 대상이 되는 테이블의 데이터 개수, 자료형, 순서를 맞춰야한다.
- 기존 Update문에선 Set 절을 통해 변경할 열을 하나하나 정해줬으나 레코드에 저장된 데이터를 사용하여 행 전체 데이터를 바꿔줄 수 있다.


## 레코드를 포함하는 레코드, 중첩 레코드
```
Declare
  Typee REC_DEPT Is Record(
    deptno NUMBER(2) NOT NULL := 99,
    dname DEPT.DNAME%TYPE,
  );

  Typee REC_EMP Is Record(
    empno EMP.EMPNO%TYPE,
    ename EMP.ENAME%TYPE,
    dinfo REC_DEPT -- 중첩 레코드
  );
  emp_rec REC_EMP;
Begin
  Select E.EMPNO, E.ENAME, D.DEPTNO, D.DNAME, D.LOC
    INTO emp_rec.empno, emp_rec.ename,
      emp_rec.dinfo.deptno,
      emp_rec.dinfo.dname,
    From EMP E, DEPT D
  Where E.DEPTNO = D.DEPTNO
  AND E.EMPNO = 7788;

  DBMS_OUTPUT.PUT_LINE('EMPNO: ' || emp_rec.empno);
  DBMS_OUTPUT.PUT_LINE('ENAME: ' || emp_rec.ename);

  DBMS_OUTPUT.PUT_LINE('DEPTNO: ' || emp_rec.dinfo.deptno);
  DBMS_OUTPUT.PUT_LINE('DNAME: ' || emp_rec.dinfo.dname);
End;
/
```


# 컬렉션
자료형이 같은 여러 데이터를 저장하는 타입

1. 연관 배열
인덱스라고 불리는 Key, value 로 구성되는 컬렉션
- 중복되지 않는 유일한 키를 통해 값을 저장하고 불러온다.
```
Type 연관배열명 Is Table of 타입 (Not Null)
Index by 인덱스형;
```

3. 중첩 테이블

4. VARRAY (variable-size array)

