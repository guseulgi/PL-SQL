# 저장 서브프로그램
- 기존 PL/SQL 블록은 작성한 내용을 한번만 실행하는 익명 블록이라 한다. 오라클에 저장되지 않으므로 실행한 다음 다시 실행하려면 PL/SQL을 다시 작성해야 한다.
- 주기적으로 필요할 때마다 여러 번 사용해야 하는 상황이 필요한 경우 오라클에 저장하는 PL/SQL 프로그램을 저장 서브프로그램이라고 한다.

```
      익명 블록        |        저장 서브프로그램
----------------------------------------------
      이름 없음        |          이름 저장
  저장할 수 없음        |            저장함
 실행할 때마다 컴파일     |      저장할 때 1번 컴파일
  공유할 수 없음        |      공유하여 사용 가능
    호출 할 수 없음     |          호출 가능
```


## 저장 프로시저
- 특정 처리 작업을 수행하기 위한 서브프로그램
- SQL문에서 사용 불가
---
### 파라미터를 사용하지 않는 프로시저
```
-- 프로시저 선언
Create [Or Replace] Procedure 프로시저명
Is | As
  선언부
Begin
  실행부
Exception
  예외 처리부
End 프로시저명;
```
- Declare 를 사용하지 않고 Is 혹은 As키워드를 사용한다.
- 선언부에 내용이 없더라도 키워드를 꼭 써줘야한다.

```
-- 프로시저 실행
Execute 프로시저명;
```

```
-- PL/SQL 블록에서 프로시저 실행
Begin
  프로시저명;
End;
```
- 실행부에 프로시저명을 적어줘서 실행해줄 수 있다.

```
-- 프로시저 내용 확인
1. NAME : 서브프로그램 생성 객체 이름
2. TYPE : 서브프로그램 종류
3. LINE : 서브프로그램 라인 번호
4. TEXT : 서브프로그램에 작성한 소스 코드

Select * From USER_SOURCE
WHERE NAME = 프로시저명;

Select TEXT From USER_SOURCE
WHERE NAME = 프로시저명;
```
- USER_SOURCE 데이터 사전에서 바로 조회가 가능하다.

```
-- 프로시저 삭제
Drop procedure 프로시저명;
```

- 프로시저의 소스 코드를 변경할 때에는 Create or replace procedure 명령어로 프로시저를 재생성해준다.
- Alter procedure 는 프로시저의 소스 코드 내용을 재컴파일하는 명령어로 소스 코드 내용을 변경하진 않는다.


### 파라미터를 사용하는 프로시저
```

```


## 저장 함수
- 특정 연산을 거친 결과 값을 반환하는 서브프로그램
- SQL문에 사용 가능


## 패키지
- 저장 서브프로그램을 그룹화


## 트리거
- 특정 상황(이벤트)이 발생할 때 자동으로 연달아 수행할 기능


